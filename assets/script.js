var base_url="https://localhost/busana/";$(document).ready(function(){$(".add_cart").click(function(){var a=$(this).data("produkid"),t=$(this).data("produknama"),e=$(this).data("produkharga"),i=$(this).data("produkimg"),s=$("#add_qty").val(),n=$("#variasi").val();if(null==s&&null==n)s=1,n="";$.ajax({url:base_url+"cart/addToCart",method:"POST",data:{produk_id:a,produk_nama:t,produk_harga:e,produk_image:i,quantity:s,variasi:n},beforeSend:function(){$(".galo").css("display","block")},success:function(){setTimeout(()=>{$(".galo").css("display","none"),window.location=base_url+"cart"},5e3)}})}),$(".hapus_cart").on("click",function(a){a.preventDefault();var t=$(this).attr("id");$.ajax({url:base_url+"cart/delCart",method:"POST",data:{row_id:t},success:function(){toastr.success("produk telah berhasil dihapus dalam keranjang anda"),setTimeout(()=>{window.location=base_url+"cart"},5e3)}})}),$("#provinsi").change(function(){var a=$("#provinsi").val();if(""==a)return $("#kota").html('<option value="" selected>Pilih kota</option>').attr("disabled",!0),$("#kecamatan").html('<option value="" selected>Pilih kecamatan</option>').attr("disabled",!0),void $("#kurir").attr("disabled",!0);$.ajax({url:base_url+"cekongkir",method:"POST",dataType:"html",data:{provinsi_id:a},success:function(a){$("#kota").html(a).attr("disabled",!1)}}),$("#kota").change(function(){var a=$("#kota").val();if(""==a)return $("#kecamatan").html('<option value="" selected>Pilih kecamatan</option><br>').attr("disabled",!0),void $("#kurir").attr("disabled",!0);$.ajax({url:base_url+"cekongkir",method:"POST",dataType:"html",data:{kota_id:a},success:function(a){$("#kecamatan").html(a).attr("disabled",!1),$("#kurir").attr("disabled",!1)}})})}),$("#cekongkir1").click(function(){var a=$("#provinsi").val(),t=$("#kota").val(),e=$("#kecamatan").val(),i=$("#kurir").val();""!=a&&""!=t&&""!=kecamatan&&""!=i?$.ajax({url:base_url+"cekongkir/getOngkir",method:"POST",dataType:"html",data:{kecamatan_id:e,kurir:i},beforeSend:function(){$(".hasilcek").html('<div class="sk-wave sk-center"><div class="sk-wave-rect"></div><div class="sk-wave-rect"></div><div class="sk-wave-rect"></div><div class="sk-wave-rect"></div><div class="sk-wave-rect"></div></div>')},success:function(a){$(".hasilcek").html(a)}}):$(".hasilcek").html('<div class="alert alert-danger" role="alert">Mohon pilih input yang belum terisi</div>')})}),$(function(){$("#tracking").click(function(){var a=$("#idpesanan").val();if(""==$.trim(a))return $("#isi").html('<div class="alert alert-danger" role="alert">Mohon isi input id pesanan</div>'),$(".btnshow").html('<button type="button" class="btn btn-secondary" data-dismiss="modal">Kembali</button>'),void $("#cekorder").modal("show");$.ajax({url:base_url+"cekorder",method:"POST",dataType:"json",data:{idpesanan:a},beforeSend:function(){$(".galo").css("display","block")},success:function(t){$("#isi").html(t.pesan),$(".btnshow").html(t.btn),$(".judul").html("Idpesanan #"+a),$("#cekorder").modal("show")},complete:function(){$(".galo").css("display","none")}})})}),$(document).ready(function(){$(".btnshow").on("click",function(){if($("button[id=cekresi5]").is(":submit")){var a=$("#cekresi5").data("resi"),t=$("#cekresi5").data("kurir");$.ajax({url:base_url+"cekorder/goresi",method:"POST",dataType:"json",data:{resi:a,kurir:t},beforeSend:function(){$("#cekorder").modal("hide"),$(".galo").css("display","block")},success:function(t){$("#isi").html(t.pesan),$(".btnshow").html(t.btn),$(".judul").html("Cek resi #"+a),$("#cekorder").modal("show")},complete:function(){$(".galo").css("display","none")}})}else $("button[id=bayar]").is(":submit")&&(window.location=base_url+"konfirmasi")})}),$(document).ready(function(){$("#uptcart").click(function(){$("#formupdatecart").submit()}),$("#submit-newsletter").click(function(){var a=$("#email_newsletter").val();""!=$.trim(a)?$.ajax({url:base_url+"ajax/newsletter",method:"POST",dataType:"json",data:{email:a},success:function(a){$("#email_newsletter").val(""),"sukses"==a.type?toastr.success(a.pesan):toastr.error(a.pesan)}}):toastr.error("Mohon isi email anda")}),$("#hubungi_email").click(function(){var a=$("#nama_hubungi").val(),t=$("#email_hubungi").val(),e=$("#pesan_hubungi").val();""!=$.trim(a)&&""!=$.trim(t)&&""!=$.trim(e)?$.ajax({url:base_url+"ajax/hubungi",method:"POST",dataType:"json",data:{nama:a,email:t,pesan:e},beforeSend:function(){$(".galo").css("display","block")},success:function(a){$(".galo").css("display","none"),$("#nama_hubungi").val(""),$("#email_hubungi").val(""),$("#pesan_hubungi").val(""),"sukses"==a.type?toastr.success(a.pesan):toastr.error(a.pesan)}}):toastr.error("Mohon isi input yang kosong")})}),$(function(){$(".cekproduk").autocomplete({source:base_url+"ajax/autocompleteMobile"}),$("#cariproduk").click(function(){var a=$(".cekproduk").val();if(""!=$.trim(a)){var t=$(".cekproduk").val();$.ajax({url:base_url+"ajax/cekAutocompleteMobile",method:"POST",dataType:"json",data:{nama:t},success:function(a){"ada"==a.type?window.location=base_url+"produk/"+a.slug:($(".cekproduk").val(""),toastr.error(a.slug))}})}else toastr.error("Mohon isi produk yang anda cari")}),$("#btnulasan").click(function(){var a=$('input[name="invoice_id"]').val();""!=$.trim(a)?$.ajax({url:base_url+"ajax/cekRating",method:"POST",dataType:"json",data:{invoice:a},success:function(a){"sukses"==a.type?setTimeout(()=>{window.location=base_url+"tambah-ulasan/"+a.pesan},3e3):($('input[name="invoice_id"]').val(""),toastr.error(a.pesan))}}):toastr.error("Mohon masukan invoice anda, jangan kosong")})});